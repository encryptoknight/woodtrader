// Generated by CoffeeScript 1.4.0
(function(){ig.module("game.entities.tree").requires("game.entities.common.static-entity").defines(function(){return EntityTree=EntityStaticEntity.extend({size:{x:85,y:55},offset:{x:65,y:155},collides:ig.Entity.COLLIDES.FIXED,type:ig.Entity.TYPE.A,animSheet:new ig.AnimationSheet("media/environment/tree.png",220,211),treeStrike:new ig.Sound("media/sounds/tree-strike.*"),treeFall:new ig.Sound("media/sounds/tree-fall.*"),dropLogChance:30,flashTimer:null,flashCurrent:0,flashTime:.1,flashAlphas:[.5,1,.5,1],entityType:"tree",receiveDamage:function(e,t){this.flash();this.health-e>0&&this.treeStrike.play();return this.parent(e,t)},kill:function(){this.treeFall.play();Math.random()*100<this.dropLogChance&&ig.game.spawnEntity(EntityLog,this.pos.x,this.pos.y);return this.parent()},flash:function(){return this.flashTimer=new ig.Timer(this.flashTime)},draw:function(){var e,t,n;if(((e=this.flashTimer)!=null?e.delta():void 0)<0)this.currentAnim.alpha=this.flashTimer.delta().map(0,-this.flashTimer.target,this.flashAlphas[this.flashCurrent],(t=this.flashCurrent)===0||t===2?1:.5);else if(this.flashCurrent===3){this.flashCurrent=0;this.flashTimer=null}else{this.flashCurrent++;(n=this.flashTimer)!=null&&n.reset()}return this.parent()}})})}).call(this);