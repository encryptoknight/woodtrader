ig.module("game.entities.player").requires("plusplus.abstractities.player","game.entities.abilities.fireball-caster","game.entities.abilities.axe","game.entities.inventory","game.common.weapon-manager").defines(function(){EntityPlayer=ig.Player.extend({size:{x:16,y:20},offset:{x:17,y:22},collides:ig.Entity.COLLIDES.ACTIVE,type:ig.Entity.TYPE.A,animSheet:new ig.AnimationSheet(ig.CONFIG.PATH_TO_CHARACTERS+"player_v1.png",50,50),animFrameTime:.1,animInit:"idleDown",animSettings:{idleDown:{sequence:[0],frameTime:1},idleUp:{sequence:[7],frameTime:1},idleRight:{sequence:[14],frameTime:1},idleLeft:{sequence:[21],frameTime:1},moveDown:{sequence:[0,1,0,2]},moveUp:{sequence:[7,8,7,9]},moveRight:{sequence:[14,15,14,16]},moveLeft:{sequence:[21,22,21,23]},axeDown:{sequence:[3]},axeUp:{sequence:[4]},axeRight:{sequence:[5]},axeLeft:{sequence:[6]},fireballDown:{sequence:[10]},fireballUp:{sequence:[11]},fireballRight:{sequence:[12]},fireballLeft:{sequence:[13]}},states:{DEFAULT:1,IN_INVENTORY:2},state:null,maxVelGrounded:{x:250,y:250},speed:{x:1e4,y:1e4},movementAllowed:!0,inventory:null,health:50,energy:50,energyMax:50,regenHealth:!1,regen:!0,regenRateEnergy:1,regenDelay:.8,persistent:!0,activeWeapon:null,activeWeaponIndex:0,weapons:["axe","fireball"],persistedProperties:["health","mana","manaRegenerateDelayTimer","weaponManager","inventory"],initProperties:function(){this.parent(),this.state=this.states.DEFAULT,ig.global.wm||(this.inventory=ig.game.spawnEntity(EntityInventory),this.inventory.pos.x=(ig.system.width-this.inventory.size.x)/2,this.inventory.pos.y=(ig.system.height-this.inventory.size.y)/2),ig.global.player=this,this.axe=new ig.EntityAxe(this),this.fireball=new ig.FireballCaster(this),this.activeWeapon=this[this.weapons[this.activeWeaponIndex]],this.abilities.addDescendants([this.fireball,this.axe])},spawn:function(){this.parent(),this.facing={x:1,y:0}},updateChanges:function(){this.parent(),this.handleButtons()},draw:function(){ig.global.wm||(this.inventory.isVisible=this.state==this.states.IN_INVENTORY),this.parent()},handleButtons:function(){if(this.movementAllowed){if(ig.input.pressed("switchWeapon")&&(this.activeWeaponIndex++,this.weapons[this.activeWeaponIndex]||(this.activeWeaponIndex=this.weapons[this.activeWeaponIndex]?this.activeWeaponIndex:0),this.activeWeapon=this[this.weapons[this.activeWeaponIndex]]),ig.input.pressed("attack")){var a,b;a=0!==this.facing.x?this.facing.x>0?this.pos.x+this.size.x:this.pos.x:this.pos.x+.5*this.size.x,b=0!==this.facing.y?this.facing.y>0?this.pos.y+this.size.y:this.pos.y:this.pos.y+.5*this.size.y,this.activeWeapon.execute({x:a,y:b})}ig.input.pressed("inventory")&&(this.state==this.states.IN_INVENTORY?(this.movementAllowed=!0,this.state=this.states.DEFAULT):(this.movementAllowed=!1,this.state=this.states.IN_INVENTORY))}}})});