ig.module("game.entities.dialog").requires("plusplus.core.entity").defines(function(){EntityDialog=ig.EntityExtended.extend({size:{x:1,y:1},collides:ig.Entity.COLLIDES.NEVER,animSheet:new ig.AnimationSheet("media/dialogs/dialog-lines.png",1,1),animSettings:{idle:{sequence:[0],frameTime:1}},lines:new ig.Image("media/dialogs/dialog-lines.png"),corners:new ig.Image("media/dialogs/dialog-corners.png"),visible:!1,font:new ig.Font(ig.CONFIG.PATH_TO_FONTS+"media/fonts/arial-12-normal-black.png"),text:[],currentPos:0,padding:5,cornerSize:{width:4,height:4},ctx:null,init:function(a,b,c){this.ctx=ig.system.context,this.parent(a,b,c)},draw:function(){if(this.visible){var a=this.pos.x,b=this.pos.y,c=this.font.widthForString(this.text[this.currentPos]),d=c+2*this.padding,e=this.font.heightForString(this.text[this.currentPos]),f=e+2*this.padding;this.corners.drawTile(a,b,0,this.cornerSize.width),this.corners.drawTile(a+this.cornerSize.width+d,b,0,this.cornerSize.width,this.cornerSize.height,!0),this.corners.drawTile(a,b+this.cornerSize.height+f,0,this.cornerSize.width,this.cornerSize.height,!1,!0),this.corners.drawTile(a+this.cornerSize.width+d,b+this.cornerSize.height+f,0,this.cornerSize.width,this.cornerSize.height,!0,!0),this.lines.drawTile(a+this.cornerSize.width,b,0,d,1),this.lines.drawTile(a+this.cornerSize.width,b+f+2*this.cornerSize.height,0,d,1),this.lines.drawTile(a,b+this.cornerSize.height,0,1,f),this.lines.drawTile(a+d+2*this.cornerSize.width,b+this.cornerSize.height,0,1,f),this.drawRect(a+this.cornerSize.width,b+this.cornerSize.height,d,f),this.drawRect(a+this.cornerSize.width-1,b+1,d+2,this.cornerSize.height),this.drawRect(a+this.cornerSize.width-1,b+f+this.cornerSize.height,d+1,this.cornerSize.height),this.drawRect(a+1,b+this.cornerSize.height,this.cornerSize.width,f),this.drawRect(a+d+this.cornerSize.width-1,b+this.cornerSize.height,this.cornerSize.width+1,f),this.font.draw(this.text[this.currentPos],a+this.cornerSize.width+this.padding,b+this.cornerSize.height+this.padding)}},drawRect:function(a,b,c,d,e){e=e||"white",this.ctx.fillStyle=e,this.ctx.fillRect(a,b,c,d)}})});