var WoodTraderGame={},elems={window:$(window),canvas:$("#canvas"),guiContainer:$("#gui"),gui:{paused:$("#paused")}};elems.gui.paused.css({top:(elems.canvas.height()-elems.gui.paused.height())/2,left:(elems.canvas.width()-elems.gui.paused.width())/2}),ig.module("game.main").requires("impact.game","impact.font","plugins.impact-splash-loader","plugins.gui","plusplus.core.plusplus","game.levels.market1","game.levels.forest1","plusplus.debug.debug","game.entities.common.base-entity","game.entities.common.particle-generator","game.entities.common.particle","game.entities.inventory","game.entities.inventory-item","game.entities.player","game.entities.trader","game.entities.stall","game.entities.tree","game.entities.log","game.entities.menu","game.entities.enemy","game.entities.dialog","plusplus.entities.conversation").defines(function(){ig.GameExtended.inject({loadLevelDeferred:function(a,b){this.parent(a,b)}}),MainGame=ig.GameExtended.extend({arial12:new ig.Font("media/fonts/arial-12-normal-white.png"),arial14:new ig.Font("media/fonts/arial-14-normal-white.png"),arial16:new ig.Font("media/fonts/arial-16-normal-white.png"),bgMusicMarket:new ig.Sound(ig.CONFIG.PATH_TO_MUSIC+"01-A-Night-Of-Dizzy-Spells.*"),bgMusicForest:new ig.Sound(ig.CONFIG.PATH_TO_MUSIC+"02-Underclocked-Underunderclocked-Mix.*"),pauseFx:new ig.Sound(ig.CONFIG.PATH_TO_SOUNDS+"pause.*"),unpauseFx:new ig.Sound(ig.CONFIG.PATH_TO_SOUNDS+"unpause.*"),mainBgMap:null,autoSort:!0,sortBy:ig.Game.SORT.POS_Y,playerStartingLevelPositions:{Market1:{x:472,y:292},Forest1:{x:242,y:202}},playerLastPos:null,init:function(){this.parent(),this.addGui(),ig.music.loop=!0,ig.music.volume=.5,ig.music.add(this.bgMusicMarket,"market"),ig.music.add(this.bgMusicForest,"forest"),ig.music.play("market"),this.loadLevelDeferred("Market1","playerSpawnCheckpoint")},inputStart:function(){ig.input.bind(ig.KEY.LEFT_ARROW,"left"),ig.input.bind(ig.KEY.RIGHT_ARROW,"right"),ig.input.bind(ig.KEY.UP_ARROW,"up"),ig.input.bind(ig.KEY.DOWN_ARROW,"down"),ig.input.bind(ig.KEY.SPACE,"attack"),ig.input.bind(ig.KEY.TAB,"switchWeapon"),ig.input.bind(ig.KEY.ENTER,"confirm"),ig.input.bind(ig.KEY.I,"inventory"),ig.input.bind(ig.KEY.MOUSE1,"confirm")},update:function(){if(this.parent(),this.sortEntities(),this.mainBgMap=this.mainBgMap||ig.game.getMapByName("main"),ig.global.player&&"player"===ig.global.player.name){var a=ig.global.player;this.playerLastPos=a.pos}},draw:function(){if(this.parent(),ig.global.player&&"player"===ig.global.player.name)var a=ig.global.player;var b="Health: "+a.health+"\n"+"Energy: "+a.energy+"\n"+"Logs: "+a.inventory.getCount("log")+"\n"+"Current Weapon: "+a.weapons[a.activeWeaponIndex];this.arial12.draw(b,20,20),ig.gui.draw()},addGui:function(){new ig.Image("media/joystick.png")}}),StartScreen=ig.Game.extend({arial12:new ig.Font("media/fonts/arial-12-normal-white.png"),arial16:new ig.Font("media/fonts/arial-16-normal-white.png"),instructText:"Press Space To Start",gameNameText:"WOODTRADER",inputStart:function(){ig.input.bind(ig.KEY.SPACE,"start")},update:function(){this.parent(),ig.input.pressed("start")&&ig.system.setGame(MainGame)},draw:function(){this.parent();var a=ig.system.width/2,b=ig.system.height-this.arial12.heightForString(this.instructText)-10;this.arial12.draw(this.instructText,a,b,ig.Font.ALIGN.CENTER),b=ig.system.height/2,this.arial16.draw(this.gameNameText,a,b,ig.Font.ALIGN.CENTER)}}),ig.main("#canvas",MainGame,60,elems.canvas.width(),elems.canvas.height(),1,ig.ImpactSplashLoader)});